# ToDo list for Windows USBIP client
## Order
### Create class for USBIP executable
UsbIpExe.ps1
### Install Aladdin drivers (in our case)
Тихая установка в целом поддерживается без замечаний. Установка драйвера HASP является частным случаем и не входит в общую задачу.
### Install USBIP driver
#### Сертификат, которым подписан драйвер, по умолчанию не находится в хранилище доверенных издателей.
##### Возможные варианты решения:
Рекомендация предварительно распространить сертификат средствами GPO. Выходит за рамки задачи.
Извлечение и установка сертификата в соответствующее хранилище консольными утилитами.
#### Тихая установка драйвера
Отложено.
## TODO
### Мониторинг подключенных устройств в скрипте Windows PoSh
#### Перенаправление событий в журнал Windows Event Log предпочтительнее текстового журнала, т.к.
  - уменьшает количество кода (?)
  - задействует штатные функции вместо необходимости изобретать велосипед
  - позволит в будущем централизованно собирать события
### Реакция на события
  - Устройство отключено (проверка доступности хоста)
  - Хост недоступен (попытка разбудить)
  - Хост доступен, но устройств нет (сообщение, запуск службы, перезапуск службы)
  - Выключение/перезагрузка клиента (отмонтирование устройств)
  - Саспенд клиента (отмонтирование устройств)  
  */ Поскольку более вероятным сценарием здесь является саспенд виртуальной машины, постольку отслеживать события следует, возможно, на гипервизоре/системе управления гипервизором/системе мониторинга. В этом случае перезапуск службы должен делаться третьим узлом на сервере USBIP./*
  
  - Перезапуск публикации отдельного устройства.  
  */ Для сценариев, где с одного сервера опубликовано несколько устройств для разных клиентов. Нужно заметить, что для Aladdin HASP, для которого все и затевалось, во всяком случае, для ключей 1С невозможно присутствие двух одинаковых ключей на одном хосте./*
